{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","console","log","err","searchForm","document","getElementById","searchInput","addEventListener","event","preventDefault","value","querySelector","showMessage","reddit","output","results","forEach","image","post","preview","images","source","url","title","truncateText","selftext","subreddit","score","innerHTML","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substr"],"mappings":"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","file":"14-reddit-search-api.d0901301.map","sourceRoot":"..","sourcesContent":["export default {\r\n\tsearch: function(searchTerm, searchLimit, sortBy) {\r\n\t\t\treturn fetch(`http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => data.data.children.map(data => data.data))\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n}","import reddit from './redditapi.js'\r\n\r\nconst searchForm = document.getElementById('search-form');\r\nconst searchInput = document.getElementById('search-input');\r\n\r\n\r\n// Form event listener\r\nsearchForm.addEventListener('submit', event => {\r\n\r\n\tevent.preventDefault();\r\n\r\n\tconst searchTerm = searchInput.value;\r\n\tconst sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\r\n\tconst searchLimit = document.getElementById('limit').value;\r\n\r\n\tif (!searchTerm) {\r\n\t\tshowMessage('Please add a search term', 'alert-danger');\r\n\t}\r\n\r\n\tsearchInput.value = '';\r\n\r\n\treddit.search(searchTerm, searchLimit, sortBy)\r\n\t.then(results => {\r\n\t\tlet output = `<div class='card-columns'>`\r\n\r\n\t\tresults.forEach(post => {\r\n\r\n\t\tconst image = post.preview ? post.preview.images[0].source.url : 'https://assets.entrepreneur.com/content/3x2/1300/20180301190808-reddit-logo.jpeg?width=700&crop=2:1'; \r\n\r\n\t\t\toutput += `\r\n\t\t\t<div class=\"card\">\r\n\t\t\t  <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\r\n\t\t\t  <div class=\"card-body\">\r\n\t\t\t    <h5 class=\"card-title\">${post.title}</h5>\r\n\t\t\t    <p class=\"card-text\">${truncateText(post.selftext, 100)}</p>\r\n\t\t\t    <a href=\"${post.url}\" class=\"btn btn-primary\" target=\"_blank\">Read More</a>\r\n\t\t\t    <hr>\r\n\t\t\t    <span class=\"badge badge-secondary\">Subreddit: ${post.subreddit}</span>\r\n\t\t\t    <span class=\"badge badge-dark\">Subreddit: ${post.score}</span>\t\t\t\r\n\t\t\t  </div>\r\n\t\t\t</div>\r\n\t\t\t`;\r\n\t\t})\r\n\r\n\t\toutput += `</div>`;\r\n\t\tdocument.getElementById('results').innerHTML = output;\r\n\t});\r\n\r\n})\r\n\r\n// show message\r\nfunction showMessage(message, className) {\r\n\tconst div = document.createElement('div');\r\n\tdiv.className = `alert ${className}`;\r\n\tdiv.appendChild(document.createTextNode(message));\r\n\tconst searchContainer = document.getElementById('search-container');\r\n\tconst search = document.getElementById('search');\r\n\r\n\tsearchContainer.insertBefore(div, search);\r\n\r\n\tsetTimeout(() => {\r\n\t\tdocument.querySelector('.alert').remove();\r\n\t}, 3000)\r\n}\r\n\r\n//truncate text\r\nfunction truncateText(text, limit) {\r\n\tconst shortened = text.indexOf(' ', limit)\r\n\tif (shortened == -1) return text;\r\n\treturn text.substr(0, shortened);\r\n}"]}